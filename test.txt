const fs = require("fs");
module.exports.config = {
    name: "test",
    version: "1.0.1",
    hasPermssion: 0,
    credits: "âš¡D-Jukie", 
    description: "ðŸ’´ðð¨Ì‚Ìðœ ð“ð¡ðšÌ†ð¦ ð¯ð¨Ì›Ìð¢ ðœðšÌc ð ð¨Ìð¢ ðŸðŸŽð¤ ðŸðŸŽð¤ ðŸ“ðŸŽð¤ ðŸðŸŽðŸŽð¤ ðŸðŸŽðŸŽð¤ ðŸ“ðŸŽðŸŽð¤ðŸ’Ž",
    commandCategory: "ð‘²ð’Šð’†Ì‚Ìð’Ž ð‘»ð’Šð’†Ì‚Ì€ð’",
    cooldowns: 5,
    envConfig: {
        cooldownTime: 0 
    },
    denpendencies: {
        "fs": "",
        "request": ""
}
};
module.exports.onLoad = () => {
    const fs = require("fs-extra");
    const request = require("request");
    const dirMaterial = __dirname + ``;
    if (!fs.existsSync(dirMaterial + "")) fs.mkdirSync(dirMaterial, { recursive: true });
    if (!fs.existsSync(dirMaterial + "")) request("").pipe(fs.createWriteStream(dirMaterial + ""));
}
module.exports.handleReply = async ({ 
    event:e, 
    api, 
    handleReply, 
    Currencies }) => {
    const { threadID, messageID, senderID } = e;
    let data = (await Currencies.getData(senderID)).data || {};
if (handleReply.author != e.senderID) 
return api.sendMessage("ðŸŽ‹ð‹ð®Ì›ð¨Ì›Ì£ð­ ð›ð¨Ì‚Ìðœ ð­ð¡ðšÌ†ð¦ ðœð®Ì‰ðš ðšð¢ ð§ð ð®Ì›ð¨Ì›Ì€ð¢ Ä‘ð¨Ì ð›ð¨Ì‚Ìðœ ð§ð¡ðšÌ, ð›ðšÌ£ð§ ð¤ð¨ ð§ðžÌ‚ð§ ð­ð«ðšð§ð¡ ð¥ð®Ì›ð¨Ì›Ì£ð­ ðœð®Ì‰ðš ð§ð ð®Ì›ð¨Ì›Ì€ð¢ ð¤ð¡ðšÌðœ", e.threadID, e.messageID)

var thuthach = ["ð‘ºð’‚Ìð’ð’ˆ","ð‘»ð’“ð’–Ì›ð’‚","ð‘ªð’‰ð’Šð’†Ì‚Ì€ð’–","ð‘»ð’Ì‚Ìð’Š","Äð’†Ì‚ð’Ž"]

	 var thuthach = thuthach[Math.floor(Math.random() * thuthach.length)]; 

var suthat = ["ð‘ºð’‚Ìð’ð’ˆ","ð‘»ð’“ð’–Ì›ð’‚","ð‘ªð’‰ð’Šð’†Ì‚Ì€ð’–","ð‘»ð’Ì‚Ìð’Š","Äð’†Ì‚ð’Ž"]

	 var suthat = suthat[Math.floor(Math.random() * suthat.length)]; 

  var msg = "";
    switch(handleReply.type) {
        case "choosee": {
           
            switch(e.body) {
                case "1": msg = `ðŸ’·ð‚ð¡ð®Ìðœ ð¦ð®Ì›Ì€ð§ð  ${thuthach}` ;
                case "2": msg = `ðŸ’·ð‚ð¡ð®Ìðœ ð¦ð®Ì›Ì€ð§ð  ${suthat}` ;
            };
            const choose = parseInt(e.body);
            if (isNaN(e.body)) 
            return api.sendMessage("ðŸŒ¸ ð‘½ð’–ð’Š ð’ð’Ì€ð’ð’ˆ ð’„ð’‰ð’Ì£ð’ ð’”ð’–Ì›Ì£ ð’•ð’‰ð’‚Ì£Ì‚ð’• ð’‰ð’ð’‚Ì£Ì†ð’„ ð’•ð’‰ð’–Ì›Ì‰ ð’•ð’‰ð’‚Ìð’„ð’‰!! ðŸ’–", e.threadID, e.messageID);
            if (choose > 2 || choose < 1) 
            return api.sendMessage("ðŸŒ¸ ð‹ð®Ì›Ì£ðš ðœð¡ð¨Ì£ð§ ð¤ð¡ð¨Ì‚ð§ð  ð§ðšÌ†Ì€ð¦ ð­ð«ð¨ð§ð  ððšð§ð¡ ð¬ðšÌðœð¡ðŸŽ€.", e.threadID, e.messageID); 
            api.unsendMessage(handleReply.messageID);
            if (msg == "ðŸŽ‹ChÆ°a update...") {
                msg = "ðŸŽ‹Update soon...";
            };
            return api.sendMessage(`${msg}`, threadID, async () => {
            data.work2Time = Date.now();
            await Currencies.setData(senderID, { data });
            
        });

    };
}
}


module.exports.run = async ({  
    event:e, 
    api, 
    handleReply, 
    Currencies }) => {
    const { threadID, messageID, senderID } = e;
    const cooldown = global.configModule[this.config.name].cooldownTime;
    let data = (await Currencies.getData(senderID)).data || {};
    var   t = Date.parse("February 1, 2023") - Date.parse(new Date()),
    d = Math.floor( t/(1000*60*60*24) ),
    h = Math.floor( (t/(1000*60*60)) % 24 ),
    m = Math.floor( (t/1000/60) % 60 );

    if (typeof data !== "undefined" && cooldown - (Date.now() - data.work2Time) > 0) {

        var time = cooldown - (Date.now() - data.work2Time),
            hours = Math.floor((time / (60000 * 60000 ))/24),
            minutes = Math.floor(time / 60000),
            seconds = ((time % 60000) / 1000).toFixed(0); 
        return api.sendMessage(`ðŸ’ŽððšÌ£ð§ Ä‘ðšÌƒ ð§ð¡ðšÌ£Ì‚ð§ ð›ð¨Ì‚Ìðœ ð­ð¡ðšÌ†ð¦ ð«ð¨Ì‚Ì€ð¢, ð¯ð®ð¢ ð¥ð¨Ì€ð§ð  ðªð®ðšð² ð¥ðšÌ£ð¢ ð¯ðšÌ€ð¨ ð§ð ðšÌ€ð² ð¦ðšð¢ðŸ’´.\nðŸŒ¸ ð“ðžÌ‚Ìð­ ðšÌ‚ð¦ ð¥ð¢Ì£ðœð¡ ðœð¨Ì€ð§ Â» ${d} ð§ð ðšÌ€ð² ${h} ð ð¢ð¨Ì›Ì€ ${m} ð©ð¡ð®Ìð­`, e.threadID, e.messageID); // Äoáº¡n nÃ y ae cÃ³ thá»ƒ Ä‘á»ƒ quay láº¡i sau ${housr}giá» ${minutes}phÃºt ${seconds}giÃ¢y
    }
    else {    
        var msg = {
            body: "â¤ï¸â”€â”€â”€ ðŸ’ž â”€â”€â”€â¤ï¸" +
                "\nã…¤ã…¤ðŸŒ¸ ð‘ºð’–Ì›Ì£ ð‘»ð’‰ð’‚Ì£Ì‚ð’• ðŸŒ¸" +
                "\nã…¤ã…¤ã…¤ã…¤ã…¤ð’‰ð’‚ð’š" +
                "\nã…¤ã…¤ðŸŒ¸ ð‘»ð’‰ð’–Ì›Ì‰ ð‘»ð’‰ð’‚Ìð’„ð’‰ ðŸŒ¸" + 
                "\n\nðŸ. ð‘ºð’–Ì›Ì£ ð’•ð’‰ð’‚Ì£Ì‚ð’•" +
                "\nðŸ. ð‘»ð’‰ð’–Ì›Ì‰ ð’•ð’‰ð’‚Ìð’„ð’‰" +
                "\n\nðŸŒ¸ ð‘¹ð’†ð’‘ð’ð’š ð’•ð’Šð’ ð’ð’‰ð’‚Ì†Ìð’ ð’…ð’†Ì‚Ì‰ ð’„ð’‰ð’Ì£ð’ ð’”ð’–Ì›Ì£ ð’•ð’‰ð’‚Ì£Ì‚ð’• ð’‰ð’ð’‚Ì£Ì†ð’„ ð’•ð’‰ð’–Ì›Ì‰ ð’•ð’‰ð’‚Ìð’„ð’‰ ð’ð’‰ð’‚....!!â¤" +
                "\n\nðŸŽ€â•â•â•â™¡â™¡â•â•â•ðŸŽ€"}

                return api.sendMessage(msg,e.threadID,  (error, info) => {
                data.work2Time = Date.now();
        global.client.handleReply.push({
            type: "choosee",
            name: this.config.name,
            author: e.senderID,
            messageID: info.messageID
          })  
        })
    }
}

